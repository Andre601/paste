!function o(a,s,u){function l(e,t){if(!s[e]){if(!a[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(c)return c(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[e]={exports:{}};a[e][0].call(i.exports,function(t){return l(a[e][1][t]||t)},i,i.exports,o,a,s,u)}return s[e].exports}for(var c="function"==typeof require&&require,t=0;t<u.length;t++)l(u[t]);return l}({1:[function(t,e,r){e.exports=function(t){if(Array.isArray(t))return t}},{}],2:[function(t,e,r){function u(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}e.exports=function(s){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=s.apply(t,a);function i(t){u(n,e,r,i,o,"next",t)}function o(t){u(n,e,r,i,o,"throw",t)}i(void 0)})}}},{}],3:[function(t,e,r){e.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},{}],4:[function(t,e,r){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},{}],5:[function(t,e,r){e.exports=function(t){return t&&t.__esModule?t:{default:t}}},{}],6:[function(t,e,r){e.exports=function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}},{}],7:[function(t,e,r){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},{}],8:[function(t,e,r){var n=t("./arrayWithHoles"),i=t("./iterableToArrayLimit"),o=t("./nonIterableRest");e.exports=function(t,e){return n(t)||i(t,e)||o()}},{"./arrayWithHoles":1,"./iterableToArrayLimit":6,"./nonIterableRest":7}],9:[function(t,e,r){e.exports=t("regenerator-runtime")},{"regenerator-runtime":11}],10:[function(t,e,r){e.exports=function(t,e,r,n){if(n=(r=window.getComputedStyle)?r(t):t.currentStyle)return n[e.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()})]}},{}],11:[function(t,e,r){var n=function(o){"use strict";var u,t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},i=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function a(t,e,r,n){var i=e&&e.prototype instanceof s?e:s,o=Object.create(i.prototype),a=new O(n||[]);return o._invoke=function(o,a,s){var u=h;return function(t,e){if(u===v)throw new Error("Generator is already running");if(u===p){if("throw"===t)throw e;return N()}for(s.method=t,s.arg=e;;){var r=s.delegate;if(r){var n=k(r,s);if(n){if(n===d)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(u===h)throw u=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=v;var i=c(o,a,s);if("normal"===i.type){if(u=s.done?p:f,i.arg===d)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(u=p,s.method="throw",s.arg=i.arg)}}}(t,r,a),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}o.wrap=a;var h="suspendedStart",f="suspendedYield",v="executing",p="completed",d={};function s(){}function g(){}function y(){}var m={};m[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(_([])));w&&w!==t&&l.call(w,i)&&(m=w);var x=y.prototype=s.prototype=Object.create(m);function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function L(u){var e;this._invoke=function(r,n){function t(){return new Promise(function(t,e){!function e(t,r,n,i){var o=c(u[t],u,r);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&l.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,n,i)},function(t){e("throw",t,n,i)}):Promise.resolve(s).then(function(t){a.value=t,n(a)},function(t){return e("throw",t,n,i)})}i(o.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}}function k(t,e){var r=t.iterator[e.method];if(r===u){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=u,k(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,d;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=u),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=u,t.done=!0,t};return n.next=n}}return{next:N}}function N(){return{value:u,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,y[n]=g.displayName="GeneratorFunction",o.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,n in t||(t[n]="GeneratorFunction")),t.prototype=Object.create(x),t},o.awrap=function(t){return{__await:t}},E(L.prototype),L.prototype[r]=function(){return this},o.AsyncIterator=L,o.async=function(t,e,r,n){var i=new L(a(t,e,r,n));return o.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(x),x[n]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},o.keys=function(r){var n=[];for(var t in r)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=_,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return o.type="throw",o.arg=r,n.next=t,e&&(n.method="next",n.arg=u),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=u),d}},o}("object"==typeof e?e.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},{}],12:[function(t,e,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/asyncToGenerator")),W=n(t("@babel/runtime/helpers/slicedToArray")),s=n(t("@babel/runtime/regenerator")),o=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var u=t("./lineHeight"),l=function(){function n(t){var e=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.defaultHighlighter;(0,o.default)(this,n),this.root=t,this.highlighter=r,this.matches=new Map([["(",")"],["{","}"],["[","]"],['"','"']]),this.skips=[")","}","]",'"'],this.wrap(),this.root.addEventListener("keydown",function(t){return e.onKeyDown(t)}),this.root.addEventListener("input",function(){return e.onInput()}),this.root.addEventListener("scroll",function(){return e.highlight()}),this.highlight()}var e,t;return(0,a.default)(n,[{key:"insertAtCaret",value:function(t){var e=this.root.selectionStart,r=this.root.selectionEnd,n=this.root.value.substring(0,e)+t+this.root.value.substring(r);this.root.value=n,this.root.selectionStart=e+1,this.root.selectionEnd=e+1}},{key:"linesOf",value:s.default.mark(function t(e){var r,n,i;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=-1;case 1:return n=e.substring(r+1).indexOf("\n"),i=e.substring(r+1,-1===n?void 0:n+r+1),t.next=6,i;case 6:if(-1===n)return t.abrupt("break",11);t.next=8;break;case 8:r=n+r+1,t.next=1;break;case 11:case"end":return t.stop()}},t)})},{key:"getIndentSize",value:function(){var t=null,e=new Map,r=!0,n=!1,i=void 0;try{for(var o,a=this.linesOf(this.root.value)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value,u=this.countLeadingSpaces(s);if(0!==u){null===t&&(t=u);var l=Math.abs(u-t);if(!(8<u&&(0===l||8<l))){var c=u===t?u:l;if(e.has(c)){var h=e.get(c);if(9===h)return c;e.set(c,h+1)}else e.set(c,1);t=u}}}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}if(0!==e.size)return Array.from(e.entries()).sort(function(t,e){return t<e?1:-1}).reduce(function(t,e){return t[1]>e[1]?t:e})[0];var f=this.countLeadingSpaces(this.root.value);return 0===f?2:f}},{key:"countLeadingSpaces",value:function(t){var e=0,r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){if(" "!==o.value)break;e+=1}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getCurrentLineIndices",value:function(){var t=this.findPreviousNewline(this.root.selectionStart-1);null===t&&(t=-1);var e=this.findNextNewline(this.root.selectionStart);return null===e&&(e=this.root.value.length),[t+1,e]}},{key:"getCurrentLine",value:function(){var t=this.getCurrentLineIndices(),e=(0,W.default)(t,2),r=e[0],n=e[1];return this.root.value.substring(r,n)}},{key:"setCurrentLine",value:function(t){var e=this.getCurrentLineIndices(),r=(0,W.default)(e,2),n=r[0],i=r[1];this.root.value=this.root.value.substring(0,n)+t+this.root.value.substring(i)}},{key:"getCurrentLineIndent",value:function(){var t=this.getCurrentLine(),e=this.countLeadingSpaces(t);return 0===e?0:e/this.getIndentSize()}},{key:"input",value:function(t){var e=t.key,r=t.shiftKey,n=!1;if(this.skips.includes(e)&&e===this.root.value[this.root.selectionEnd]){var i=this.root.selectionEnd+1;this.root.selectionStart=i,this.root.selectionEnd=i,t.preventDefault(),n=!0}if(!this.matches.has(e)||'"'===e&&n||(this.insertAtCaret("".concat(t.key).concat(this.matches.get(e))),t.preventDefault()),"Backspace"===e){if(this.root.selectionStart!==this.root.selectionEnd)return;var o=this.root.selectionStart,a=this.root.value[o],s=this.root.value[o-1];a===this.matches.get(s)&&(this.root.value=this.root.value.substring(0,o-1)+this.root.value.substring(o+1),this.root.selectionStart=o-1,this.root.selectionEnd=o-1,t.preventDefault())}if("Enter"===e){var u=this.root.selectionStart,l=this.root.value.substring(0,u),c=this.root.value.substring(this.root.selectionEnd),h=this.getIndentSize(),f=this.getCurrentLineIndent(),v=" ".repeat(h*(f+1)),p=" ".repeat(h*f),d=this.root.value[u-1],g=this.root.value[u],y=this.matches.has(d),m=y?v:p,b=y&&g===this.matches.get(d)?"\n".concat(p):"";this.root.value="".concat(l,"\n").concat(m).concat(b).concat(c),this.root.selectionStart=u+1+m.length,this.root.selectionEnd=this.root.selectionStart,t.preventDefault()}if("Tab"===e){t.preventDefault();var w,x,E=this.root.selectionStart,L=this.root.selectionEnd,k=this.findPreviousNewline(this.root.selectionStart-1),S=this.findNextNewline(this.root.selectionEnd),C=this.root.selectionStart!==this.root.selectionEnd;w=null===k?"":this.root.value.substring(0,k+1),x=null===S?"":this.root.value.substring(S);var O=this.getIndentSize(),_=[],N=0,T=!0,I=!1,H=void 0;try{for(var P,j=this.getLinesBetween(this.root.selectionStart,this.root.selectionEnd)[Symbol.iterator]();!(T=(P=j.next()).done);T=!0){var A=P.value;if(r){var M=this.countLeadingSpaces(A.value);if(0===M){_.push(A.value);continue}var D=Math.max(0,M-O);_.push(" ".repeat(D)+A.value.substring(M)),N+=k===this.root.selectionStart?0:M<O?-M:-O}else{if(C)_.push(" ".repeat(O)+A.value);else{var G=E-k-1;_.push("".concat(A.value.substring(0,G)).concat(" ".repeat(O)).concat(A.value.substring(G)))}N+=O}}}catch(t){I=!0,H=t}finally{try{T||null==j.return||j.return()}finally{if(I)throw H}}this.root.value=w+_.join("\n")+x,C?(this.root.selectionStart=E,1===_.length?this.root.selectionEnd=L:this.root.selectionEnd=L+N):(this.root.selectionStart=E+N,this.root.selectionEnd=this.root.selectionStart)}if("Home"===e){t.preventDefault();var F=this.getCurrentLineIndices(),z=(0,W.default)(F,2),R=z[0],q=z[1],B=this.root.value.substring(R,q),U=R+this.countLeadingSpaces(B),K=this.root.selectionStart===U?R:U;this.root.selectionStart=K,r||(this.root.selectionEnd=this.root.selectionStart)}}},{key:"findNextNewline",value:function(t,e){for(var r=1<arguments.length&&void 0!==e?e:null,n=null===r?this.root.value.length:r,i=t;i<n;i++)if("\n"===this.root.value[i])return i;return null}},{key:"findPreviousNewline",value:function(t,e){for(var r=1<arguments.length&&void 0!==e?e:null,n=null===r?0:r,i=t;n<=i;i--)if("\n"===this.root.value[i])return i;return null}},{key:"getLinesBetween",value:s.default.mark(function t(e,r){var n,i,o,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.findPreviousNewline(e-1),i=null===n?-1:n,o=e;case 3:if(!(o<r)){t.next=11;break}if("\n"===this.root.value[o])return t.next=7,{start:i+1,end:o,value:this.root.value.substring(i+1,o)};t.next=8;break;case 7:i=o;case 8:o++,t.next=3;break;case 11:if(n=this.findNextNewline(r),a=null===n?this.root.value.length:n,i===a)return t.next=16,{start:i,end:a,value:""};t.next=17;break;case 16:return t.abrupt("return",t.sent);case 17:return t.next=19,{start:i+1,end:a,value:this.root.value.substring(i+1,a)};case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}},t,this)})},{key:"replaceHighlightContents",value:function(t){var e=u.lineHeight(this.wrapper),r=-this.root.scrollTop%e;Math.abs(e+r)<1e-5&&(r=0),t.style.transform="translate3d(".concat(this.root.scrollLeft,"px, ").concat(r,"px, 0)");var n=this.wrapper.firstElementChild;null===n.firstElementChild?n.appendChild(t):n.replaceChild(t,n.firstElementChild)}},{key:"getLineIndex",value:function(t,e){if(0===e)return 0;for(var r=-1,n=0;n<=e;n++){var i=t.indexOf("\n",r+1);if(-1===i)return null;if(r=i,n+1===e)return r+1}return null}},{key:"getHighlightText",value:function(){var t=u.lineHeight(this.wrapper),e=Math.trunc(this.root.scrollTop/t),r=Math.ceil((this.root.clientHeight+this.root.scrollTop)/t),n=this.root.value,i=this.getLineIndex(n,e),o=this.getLineIndex(n,r);return null===o&&(o=n.length),n.substring(i,o)}},{key:"highlight",value:(t=(0,i.default)(s.default.mark(function t(){var e=this;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.highlighter(this.getHighlightText()).then(function(t){return e.replaceHighlightContents(t)});case 1:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"onKeyDown",value:function(t){this.input(t),t.defaultPrevented&&this.onInput()}},{key:"onInput",value:function(){this.highlight()}},{key:"shiftSelectionAfter",value:function(t,e){var r=this.root.selectionStart,n=this.root.selectionEnd;e(),this.root.selectionStart=r+t,this.root.selectionEnd=n+t}},{key:"shiftSelection",value:function(t){var e=this.root.selectionStart,r=this.root.selectionEnd;this.root.selectionStart=e+t,this.root.selectionEnd=r+t}},{key:"wrap",value:function(){if(!this.wrapped){this.root.autocomplete="off",this.root.autocapitalize="off",this.root.setAttribute("autocorrect","off"),this.root.spellcheck=!1;var t=document.createElement("div");t.classList.add("highlight");var e=document.createElement("div");e.classList.add("editor"),this.root.parentNode.insertBefore(e,this.root),e.appendChild(t),e.appendChild(this.root),this.wrapped=!0,this.wrapper=e}}}],[{key:"defaultHighlighter",value:(e=(0,i.default)(s.default.mark(function t(e){var r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=document.createElement("pre")).innerText=e,t.abrupt("return",r);case 3:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)})}]),n}();r.Editor=l},{"./lineHeight":13,"@babel/runtime/helpers/asyncToGenerator":2,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":5,"@babel/runtime/helpers/slicedToArray":8,"@babel/runtime/regenerator":9}],13:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=t("computed-style");r.lineHeight=function(t){var e=u(t,"line-height"),r=parseFloat(e);if(e===r.toString()){var n=t.style.lineHeight;t.style.lineHeight="".concat(e,"em"),e=u(t,"line-height"),r=parseFloat(e),n?t.style.lineHeight=n:delete t.style.lineHeight}if(-1!==e.indexOf("pt")?(r*=4,r/=3):-1!==e.indexOf("mm")?(r*=96,r/=25.4):-1!==e.indexOf("cm")?(r*=96,r/=2.54):-1!==e.indexOf("in")?r*=96:-1!==e.indexOf("pc")&&(r*=16),"normal"===e){var i=t.nodeName,o=document.createElement(i);o.innerHTML="&nbsp;","TEXTAREA"===i.toUpperCase()&&o.setAttribute("rows","1");var a=u(t,"font-size");o.style.fontSize=a,o.style.padding="0px",o.style.border="0px";var s=document.body;s.appendChild(o),r=o.offsetHeight,s.removeChild(o)}return r}},{"computed-style":10}],14:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./editor"),i=t("./editor");r.Editor=i.Editor,Object.defineProperty(window,"Editor",{value:n.Editor})},{"./editor":12}]},{},[14]);
//# sourceMappingURL=bundle.js.map
